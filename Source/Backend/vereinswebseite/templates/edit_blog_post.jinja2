<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link href="/static/style/create_and_edit_blog_post.css"  type="text/css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous" />    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <title>Blog Post bearbeiten</title>
</head>

<body onload="setExpirationDate()">
    <form action="#" onsubmit="return false" class ='card p-3 bg-light'> 
        <h1 id="page_h1">Blog Post bearbeiten</h1>
        <div class="form-group">
            <label for="title">Titel</label>
            <input class="form-control" required type="text" name="title" id="title" value="{{ title }}">
        </div>
        <div class="form-group" id="markdown_div">
            <label for="markdown">Markdown <a href="https://www.markdownguide.org/basic-syntax/" target="_blank"><span>&#9432;</span></a>
                <div id="livePreviewCheckbox_div">
                    <input id="livePreviewCheckbox" type="checkbox" onclick="swapShowingLivePreview(this)">
                    <span class="checkmark"></span>                   
                    <a class="checkbox-primary text-primary" id="livePreviewCheckbox_label" onclick="changeCheckboxChecked()">Live-Vorschau</a>
                </div>
            </label>
            <textarea class="form-control" required name="markdown" id="markdown">{{ content }}</textarea>
        </div>
        <div id="preview_div">
            <div  id="preview-button-group">
                <button class="btn btn-primary btn-sm" id="hidePreview_button" type="button" onclick="swapShowingPreview()">Vorschau ausblenden</button>
                <button class="btn btn-primary btn-sm" id="updatePreview_button" type="button" style="display: none" onclick="updatePreview()">Vorschau aktualisieren</button>
            </div>
        <br>
            <label for="markdown_preview">Vorschau</label>
            <div class="form-group" id="markdown_preview"></div>
        </div>
        <p id="uploadPictures">Bild hochladen und einfügen: 
            <input id="filesInput"name="uploadFiles" type="file" accept="image/*">  
        <button class="btn btn-outline-primary" type="button" id="uploadImageButton" onclick="uploadImage()"><svg xmlns="http://www.w3.org/2000/svg" width="1vw" height="1vw" fill="currentColor" class="bi bi-upload" viewBox="0 0 16 16">
            <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"/>
            <path d="M7.646 1.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 2.707V11.5a.5.5 0 0 1-1 0V2.707L5.354 4.854a.5.5 0 1 1-.708-.708l3-3z"/>
            </svg>
        </button>
        </p>
        <p id="datePicker_p">
            Bis wann soll der Post sichtbar sein? (Kein Pflichtfeld):<br>
            <input id="datePicker" type="date" min="" onclick="getCurrentDate()">
        </p>
        
        <div id="bottom-button-group">
            <button class="btn btn-primary btn-sm" id="swapShowingPreview_button" type="button" onclick="swapShowingPreview()">Vorschau anzeigen</button>
            <button class="btn btn-success btn-sm" id="save" type="submit" onclick="saveEditedBlogPost()">Speichern</button>
            <button class="btn btn-danger btn-sm" id="cancel" type="button" onclick="cancelCreatingOrEditing('Die Änderungen werden nicht gespeichert. \nTrotzdem fortfahren?')">Abbrechen</button>
            {% if can_delete_post %}
                    <button type="button" class="btn btn-danger" id="button_delete_post" onclick="deleteBlogPost();">Beitrag löschen</button>
            {% endif %}
        </div>
    </form>
<div style="display: none;" id="id">{{ id }}</div>
<div style="display: none;" id="expiration_date">{{ expiration_date }}</div>

<script>var exports = {};</script>
<script src= "/static/src/FrontendHelper.js"></script>
<script src= "/static/src/create_and_edit_blog_post.js"></script>
</body>
</html>
